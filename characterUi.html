<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>나의 스탯창 (2x2 UI - Phaser)</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <div id="phaser-container"></div>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.js"></script>
    <script>
      let dateobj = new Date().toLocaleDateString({
        year: "numeric",
        month: "numeric",
        day: "numeric",
      });
      let age = dateobj.slice(0, 4) - 1997;
      const characterData = {
        name: "KyungRokLee",
        title: "Abosolute Newbie",
        level: age,
        sex: "아이언IV",
        stats: {
          체력: `${100 - age} : (오늘내일 합니다)`,
          힘: `${Math.floor(10 - age / 10)} : (타건만 가능합니다)`,
          민첩성: `${Math.floor(
            (100 - age) / 50 + (10 - age / 10)
          )} : (지각하는 이유입니다)`,
          지혜: `INTP : (물어본 사람 없습니다)`,
          운: `${Math.floor(Math.random() * 10)} : (때마다 다릅니다)`,
        },
        skills: {
          HyperTextMarkUpLanguage:
            "한영키 뽑히면<얖 침ㄴㄴ='퍄녀미'>치게된다, 전설에는 이것만 사용하는 자들의 클럽이 있다고 한다",
          CascadingStyleSheet:
            "@--:: 이 이모티콘에서나 쓸만한 기호를 变幻自在 하면， div로 구성된 최애캐가 춤추는걸 볼수있다",
          JavaScript:
            "마인크래프트 시뮬레이터 진화판이라고 보면된다, 안그래도 느린데 React 를 버무리면 침에서 눈난다",
          외않되:
            "F12 눌렀는데 Reference, console 이(가) 깔끔할때 사용가능, 일정확률로 모니터 마우스 키보드중 하나를 잃는다",
          구글링:
            "눈에 보이지도 만져지지도 않지만 어디에든 존재하며 전능한 존재에게 기도한다, 마친후 37.4, -122 를 향해 절하면 된다",
          "멸망의 노래":
            "외않되 3스택이후 사용가능, 목격자의 증언에 따르면 소리는 절규에 가깝다고한다, 일정확률로 단게 떙긴다",
        },
      };

      class StatScene extends Phaser.Scene {
        constructor() {
          super("StatScene");
          this.skillDetails = {};
        }

        preload() {
          // No custom font loading
        }

        create() {
          const width = this.sys.game.config.width;
          const height = this.sys.game.config.height;
          const padding = 20;
          const panelWidth = (width - 3 * padding) / 2;
          const panelHeight = (height - 3 * padding) / 2;
          const goldColor = 0xffd700;
          const textColor = 0xf0ead6;
          const shadowColor = 0x000000;
          const panelBgColor = 0x333333;
          const panelBorderColor = 0x555555;
          const buttonBaseColor = 0x444444;
          const buttonHoverColor = 0x666666;

          this.input.on("wheel", (pointer, deltaX, deltaY) => {
            // Do nothing in Phaser, let the browser scroll
          });

          const addPanel = (x, y, w, h, title) => {
            this.add
              .rectangle(x, y, w, h, panelBgColor)
              .setOrigin(0)
              .setStrokeStyle(2, panelBorderColor);
            if (title) {
              this.add.text(x + 10, y + 10, title, {
                fontFamily: "Arial",
                fontSize: "26px",
                fill: "#" + goldColor.toString(16).padStart(6, "0"),
              });
            }
          };

          const addShadowText = (x, y, text, size, color) => {
            const shadow = this.add.text(x + 2, y + 2, text, {
              fontFamily: "Arial",
              fontSize: `${size}px`,
              fill: "#" + shadowColor.toString(16).padStart(6, "0"),
            });
            return this.add.text(x, y, text, {
              fontFamily: "Arial",
              fontSize: `${size}px`,
              fill: "#" + color.toString(16).padStart(6, "0"),
            });
          };

          const addSimpleText = (x, y, text, size, color) => {
            return this.add.text(x, y, text, {
              fontFamily: "Arial",
              fontSize: `${size}px`,
              fill: "#" + color.toString(16).padStart(6, "0"),
            });
          };

          // Top-Left Panel: Character Info
          let x = padding;
          let y = padding;
          addPanel(x, y, panelWidth, panelHeight, "정보");
          addShadowText(x + 30, y + 60, characterData.name, 26, goldColor);
          y += 120;
          x += 35;
          addSimpleText(x, y, characterData.title, 20, textColor);
          y += 35;
          addSimpleText(x, y, `레벨: ${characterData.level}`, 20, textColor);
          y += 35;
          addSimpleText(x, y, `성별: ${characterData.sex}`, 20, textColor);

          // Top-Right Panel: Stats
          x = padding + panelWidth + padding;
          y = padding;
          addPanel(x, y, panelWidth, panelHeight, "스텟");
          y += 60;
          x += 30;
          let statY = y;
          for (const 스텟 in characterData.stats) {
            addSimpleText(
              x,
              statY,
              `${스텟}: ${characterData.stats[스텟]}`,
              20,
              textColor
            );
            statY += 35;
            if (statY > padding + panelHeight - 20) break; // Basic overflow handling
          }

          // Bottom-Left Panel: Skills
          x = padding;
          y = padding + panelHeight + padding;
          addPanel(x, y, panelWidth, panelHeight, "패시브 스킬");
          y += 55;
          x += 10;
          let skillY = y;
          for (const skill in characterData.skills) {
            const skillText = addSimpleText(
              x + 10,
              skillY,
              skill,
              21,
              textColor
            );
            const detailsText = this.add
              .text(x + 10, skillY + 25, characterData.skills[skill], {
                fontFamily: "Arial",
                fontSize: "16px",
                fill: "#ddd",
                wordWrap: { width: panelWidth - 20 },
              })
              .setAlpha(0);
            const button = this.add
              .rectangle(
                x + panelWidth - 60,
                skillY + 8,
                60,
                25,
                buttonBaseColor
              )
              .setOrigin(0.5)
              .setInteractive()
              .on("pointerover", () =>
                this.toggleSkillDetails(skill, detailsText)
              )
              .on("pointerout", () =>
                this.toggleSkillDetails(skill, detailsText)
              )
              .on("pointerover", () => button.setFillStyle(buttonHoverColor))
              .on("pointerout", () => button.setFillStyle(buttonBaseColor));
            const buttonLabel = addSimpleText(
              x + panelWidth - 60,
              skillY + 7,
              "상세",
              16,
              textColor
            ).setOrigin(0.5);
            this.skillDetails[skill] = detailsText;
            skillY += 75;
            if (skillY > padding + panelHeight * 2 - 30) break; // Basic overflow handling
          }

          // Bottom-Right Panel: More Skills
          x = padding + panelWidth + padding;
          y = padding + panelHeight + padding;
          addPanel(x, y, panelWidth, panelHeight, "액티브 스킬");
          y += 55;
          x += 10;
          let additionalSkillY = y;
          const skillsArray = Object.keys(characterData.skills);
          const startIndex = Math.floor(skillsArray.length / 2); // Start from the second half of skills
          for (let i = startIndex; i < skillsArray.length; i++) {
            const skill = skillsArray[i];
            const skillText = addSimpleText(
              x + 10,
              additionalSkillY,
              skill,
              21,
              textColor
            );
            const detailsText = this.add
              .text(
                x + 10,
                additionalSkillY + 25,
                characterData.skills[skill],
                {
                  fontFamily: "Arial",
                  fontSize: "16px",
                  fill: "#ddd",
                  wordWrap: { width: panelWidth - 20 },
                }
              )
              .setAlpha(0);
            const button = this.add

              .rectangle(
                x + panelWidth - 60,
                additionalSkillY + 8,
                60,
                25,
                buttonBaseColor
              )
              .setOrigin(0.5)
              .setInteractive()
              .on("pointerover", () =>
                this.toggleSkillDetails(skill, detailsText)
              )
              .on("pointerout", () =>
                this.toggleSkillDetails(skill, detailsText)
              )
              .on("pointerover", () => button.setFillStyle(buttonHoverColor))
              .on("pointerout", () => button.setFillStyle(buttonBaseColor));
            const buttonLabel = addSimpleText(
              x + panelWidth - 60,
              additionalSkillY + 7,
              "상세",
              16,
              textColor
            ).setOrigin(0.5);
            this.skillDetails[skill] = detailsText;
            additionalSkillY += 75;
            if (additionalSkillY > padding + panelHeight * 2 - 30) break; // Basic overflow handling
          }
        }

        toggleSkillDetails(skill, detailsText) {
          if (detailsText.alpha === 0) {
            detailsText.setAlpha(1);
          } else {
            detailsText.setAlpha(0);
          }
        }
      }

      const config = {
        type: Phaser.AUTO,
        width: 900,
        height: 700,
        parent: "phaser-container",
        scene: StatScene,
        backgroundColor: "#181818",
        pixelArt: true,
      };

      const game = new Phaser.Game(config);
    </script>
  </body>
</html>
